<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stable AI Chat</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="stylesheet" href="styles.css">
    <!-- Prism.js for syntax highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />
</head>
<body>
    <div class="main-content">
        <div class="header">
            <div class="logo"></div>
            <h1 class="title">Stable Chat</h1>
            <p class="subtitle">Universal AI Interface</p>
        </div>

        <div class="endpoints-section">
            <div class="section-header">
                <div class="section-title">API Endpoints</div>
                <button class="add-btn" id="add-endpoint-btn">+ Add Endpoint</button>
            </div>
            <div class="endpoints-list" id="endpoints-list">
                <!-- Endpoints will be rendered here -->
            </div>
        </div>
    </div>

    <!-- Endpoint Modal -->
    <div class="modal" id="endpoint-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="modal-title">Add Endpoint</h3>
                <button class="modal-close" id="modal-close">√ó</button>
            </div>
            <form id="endpoint-form">
                <div class="form-group">
                    <label class="form-label" for="endpoint-name">Name</label>
                    <input type="text" class="form-input" id="endpoint-name" placeholder="e.g., GPT-4, Claude, Gemini" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="endpoint-url">URL</label>
                    <input type="url" class="form-input" id="endpoint-url" placeholder="https://api.provider.com/v1/chat" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="endpoint-headers">Headers (JSON)</label>
                    <textarea class="form-input" id="endpoint-headers" rows="3" placeholder='{"Authorization": "Bearer your-key"}'></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label" for="endpoint-model">Model (Optional)</label>
                    <input type="text" class="form-input" id="endpoint-model" placeholder="e.g., custom-notset, gpt-4, claude-3">
                </div>
                <div class="form-group">
                    <label class="form-label" for="endpoint-method">Method</label>
                    <select class="form-input" id="endpoint-method">
                        <option value="POST">POST</option>
                        <option value="GET">GET</option>
                        <option value="PUT">PUT</option>
                    </select>
                </div>
                <div class="form-group">
                    <div class="streaming-toggle-container">
                        <label class="form-label">Response Type</label>
                        <div class="toggle-wrapper">
                            <input type="checkbox" id="streaming-toggle" class="toggle-input">
                            <label for="streaming-toggle" class="toggle-label">
                                <span class="toggle-slider"></span>
                                <span class="toggle-text">Enable Streaming Responses</span>
                            </label>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="auth-toggle-container">
                        <label class="form-label">Authentication</label>
                        <div class="toggle-wrapper">
                            <input type="checkbox" id="auth-toggle" class="toggle-input">
                            <label for="auth-toggle" class="toggle-label">
                                <span class="toggle-slider"></span>
                                <span class="toggle-text">Enable Authentication</span>
                            </label>
                        </div>
                    </div>
                </div>
                <div class="auth-fields" id="auth-fields" style="display: none;">
                    <div class="form-group">
                        <label class="form-label" for="auth-token">JWT Bearer Token</label>
                        <textarea class="form-input" id="auth-token" rows="3" placeholder="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."></textarea>
                        <small class="form-hint">Paste your JWT token here. The token contains all required user information.</small>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancel-btn">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Chat Toggle (outside chat) -->
    <button class="chat-toggle" id="chat-toggle">üí¨</button>

    <!-- Chat Container -->
    <div class="chat-container" id="chat-container">
        <div class="chat-header">
            <h2 class="chat-title">AI Chat</h2>
            <div class="chat-status">
                <div class="status-dot"></div>
                <span id="status-text">Ready</span>
            </div>
            <div class="conversation-id" id="conversation-id" style="display: none;">
                <span class="conversation-label">Thread ID:</span>
                <span class="conversation-value" id="conversation-value"></span>
            </div>
            <!-- New Chat Session Button -->
            <button class="new-chat-btn" id="new-chat-btn" title="Start New Chat Session">
                <span class="btn-icon">+</span>
                <span class="btn-text">New</span>
            </button>
            <!-- Chat Toggle (inside chat) -->
            <button class="chat-toggle repositioned" id="chat-close-btn">‚úï</button>
            <!-- Resize Handle -->
            <div class="resize-handle" id="resize-handle"></div>
        </div>
        
        <div class="chat-messages" id="chat-messages">
            <!-- Messages will be added here -->
        </div>
        
        <div class="chat-input-area">
            <div class="input-wrapper">
                <textarea 
                    id="chat-input" 
                    class="chat-input" 
                    placeholder="Type your message or use voice..." 
                    rows="1"
                ></textarea>
                <button id="voice-btn" class="voice-btn" title="Voice Input">
                    <span class="voice-icon">üé§</span>
                </button>
                <button id="send-btn" class="send-btn">Send</button>
            </div>
            <div class="voice-status" id="voice-status" style="display: none;">
                <div class="voice-indicator">
                    <div class="voice-dot"></div>
                    <span class="voice-text">Listening...</span>
                </div>
            </div>
        </div>
    </div>

    <footer class="app-footer">
        <p>Developed with ‚ù§Ô∏è by <a href="https://www.linkedin.com/in/bijonguha/" target="_blank">Bijon Guha</a></p>
    </footer>

    <!-- Prism.js Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>
    
    <script src="app.js" type="module"></script>
</body>
</html>